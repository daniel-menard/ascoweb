/* Template pour afficher un <label> et une <div class="row"> dans une autre <div class="field"> */
<template match="//row" label="" class="" value="">
    <div class="row $class">
        <label test="'$label'" class="field $class">$label</label>
        <div class="field $class">
            {select('string(@value)')}{select('.//node()')}{select('@*')}
        </div>
    </div>
</template>

/* TODO : factoriser Type, Date, Tit, Aut si possible */


<h1>Base documentaire - Recherche - Accès public</h1>

/* Afficher le nombre de réponses obtenues ? */

<h2>Liste des réponses obtenues</h2>
<p>Equation : <code>$equation</code></p>
<p><strong>Les documents sont triés par date et par type, les périodiques par ordre alphabétique.</strong></p>
<hr />

<ul class="shortlist">
    <loop on="$selection" as="$rank, $record">
        <li class="record">
            <a class="fullrecord" href="show?ref=$REF" title="Voir la notice complète"><span>Voir la notice complète</span></a>
            /* affiche les informations appropriées en fonction du type de document et des drois utilisateurs */
            <switch test="$type">
            
                <case test="'Article'">        
                    <row >$Type, $Date</row>
                    <row label="Titre">$Tit</row>
                    <opt><row label="Auteur(s)">$Aut</row></opt>
                    <row label="Périodique">$Rev<opt>, vol $Vol</opt><opt>, n°$Num</opt>, p. $PdPf</row>
                </case>
                
                <case test="'Congrès'">
                    <row>$Type, $Date</row>
                    <row label="Titre">$Tit</row>
                    <opt><row label="Auteur(s)">$Aut</row></opt>
                    <opt><row label="Congrès"><opt>$CongrTit, </opt><opt>$CongrDat, </opt><opt>n°$CongrNum, </opt><opt>$CongrLie, </opt><opt>$Lieu : </opt><opt>$Edit, </opt><opt>$Reed, </opt>$Page</row></opt>
                </case>
                
                <case test="'Livre'">
                    <row>$Type, $Date</row>
                    <row label="Titre">$Tit</row>
                    <opt><row label="Auteur(s)">$Aut</row></opt>
                    <opt><row label="Editeur"><opt>$Lieu : </opt><opt>$Edit, </opt><opt>$Reed, </opt>$Page</row></opt>
                </case>
                
                <case test="$type=='Mémoire' || $type=='Thèse'">
                    <row>$Type, $Date</row>
                    <row label="Titre">$Tit</row>
                    <row label="Auteur(s)">$Aut</row>
                    <opt><row><opt>$DipSpe, </opt><opt>$Lieu, </opt><opt>$Edit, </opt>$Page</row></opt>
                </case>
                
                <case test="'Rapport'">
                    <row>$Type, $Date</row>
                    <row label="Titre">$Tit</row>
                    <opt><row label="Auteur(s)">$Aut</row></opt>
                    <opt><row label="Editeur"><opt>$Lieu : </opt><opt>$Edit, </opt><opt>$Reed, </opt>$Page</row></opt>
                    <opt><row label="Périodique"><opt>$Rev</opt><opt>, vol $Vol</opt><opt>, n°$Num</opt><opt>, $PageRev</opt></row></opt>
                </case>
                
                <case test="'Texte officiel'">
                    <row>$Type</row>
                    <row label="Titre">$Tit<opt> / $Annexe</opt></row>
                </case>
                
                <default>
                    
                </default>
            </switch>
        </li>
        <hr />
    </loop>
</ul>

