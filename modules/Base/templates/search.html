<if test="{User::hasAccess('AdminBase')}">        /* Administrateur */
    <div class="titre">Base documentaire - Recherche - Accès administrateur</div>
</if>
<elseif test="{User::hasAccess('EditBase')}">     /* Membre du GIP */
    <div class="titre">Base documentaire - Recherche - Accès membre du GIP</div>
</elseif>
<else>
    <div class="titre">Base documentaire - Recherche - Accès public</div>
</else>

<div class="texte">

<form class="form search" action="/base/search" method="get">
    Equation xapian : <textbox name="_equation" cols="50" rows="3" /><br />
    
    Réponses par page : 
    <select name="_max">
        <option selected="selected">10</option>
        <option>50</option>
        <option>100</option>
        <option>500</option>
    </select>

    Tri : 
    <select name="_sort" 
        src="{
                array
                (
                    array('code'=>'-', 'label'=>'docid décroissants'),
                    array('code'=>'+', 'label'=>'docid croissants'),
                    array('code'=>'%', 'label'=>'par pertinence'),
                )
            }" />
    <checkbox name="testdm" value="1" />testdm            
    <br />
    <submit label="Rechercher" />
</form>

<hr style="clear: both; margin-top: 10em; margin-bottom: 2em;" />

<form class="form search" action="/base/search" method="get">

    <div>
        <textbox name="Mots" label="Recherche tous champs" />
    </div>
    
    <div>
        <textbox name="MotsCles" label="Descripteurs" />
        <p class="exemple"><a href="http://www.ascodocpsy.org/article.php3?id_article=691" target="_blank" title="Consulter le thesaurus SantéPsy (nouvelle fenêtre)">Pour connaître les descripteurs à utiliser, consultez le thesaurus SantéPsy</a></p>
    </div>

    <div>
        <textbox name="Titres" label="Titre ou mots du titre" />
    </div>
    
    <div>
        <textbox name="Aut" label="Auteur" />
    </div>
    
    <div>
        <textbox name="Resu" label="Résumé" />
    </div>

    <div>
        <checklist name="Dates" label="Date du document" src="new TextTable($this->path.'../../tables/date.txt')" />
        <div class="date">
            <select name="Dates" label="Autre" src="new TextTable($this->path.'../../tables/datelist.txt')">
                <option></option>
            </select>
        </div>
    </div>
    
    <div>
        <textbox name="DateText" label="Date du texte officiel" />
        <span class="exemple">
            Format : AAAA-MM-JJ ou AAAA-MM ou AAAA
        </span>
    </div>
    
    <div>
        <if test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
            <checklist name="Type" label="Type de document" src="new TextTable($this->path.'../../tables/type.txt')" />
        </if>
        <else>
            <checklist name="Type" label="Type de document" src="new TextTable($this->path.'../../tables/public_type.txt')" />
        </else>
    </div>
    
    /* TODO : quickTable ? */
    <div>
        <checklist name="Liens" label="Texte intégral" src="array(array('code'=>'@notempty@', 'label'=>'Documents en ligne uniquement'))" />
    </div>
    
    <div>
        <textbox name="Rev" label="Titre du périodique" />
    </div>

    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="Edit" label="Editeur" />
    </div>
    
    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="Col" label="Collection" />
    </div>
    
    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="IsbnIssn" label="ISBN, ISSN" />
    </div>
    
    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="Numeros" label="Numéro (du périodique, du congrès, du texte officiel)" />
    </div>
    
    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="Vol" label="Numéro de volume" />
    </div>
    
    <div test="{User::hasAccess('AdminBase')}">
        <textbox name="DipSpe" label="Spécialité du diplôme" />
    </div>

    <div>
        <select name="NatText" label="Nature du texte officiel" src="new TextTable($this->path.'../../tables/nattext.txt')" size="3" multiple="true" />
        <div class="infonatext">
            <p class="exemple">
                Pour sélectionner plusieurs types de texte officiel,
                appuyez sur la touche contrôle (Ctrl) et cliquez sur 
                les types souhaités. Procéder de même pour désélectionner.
            </p>
        </div>
    </div>
    
    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="Loc" label="Localisation" />
    </div>
    
    <div test="{User::hasAccess('AdminBase') || User::hasAccess('EditBase')}">
        <textbox name="ProdFich" label="Producteur" />
        <p class="exemple">
            Producteur, localisation : format="asco5"
        </p>
    </div>
    
    /* TODO : quickTable */
    <div test="{User::hasAccess('AdminBase')}">
        <checklist name="FinSaisie" label="Saisie de notices" src="array(array('code'=>'faux', 'label'=>'Notices en cours de saisie'), array('code'=>'vrai', 'label'=>'Notices terminées'))" />
    </div>
    
    <div test="{User::hasAccess('AdminBase')}">
        <checklist name="Valide" label="Validation de notices" src="array(array('code'=>'faux', 'label'=>'Notices à valider'), array('code'=>'vrai', 'label'=>'Notices validées'))" />
    </div>
    
    <div test="{User::hasAccess('AdminBase')}">
        <textbox name="Creation" label="Date de création" />
    </div>
    
    <div test="{User::hasAccess('AdminBase')}">
        <textbox name="LastUpdate" label="Date de mise à jour" />
        <p class="exemple">
            Exemples : 2006*, 200612*, 20061215
        </p>
    </div>
    
    <div class="buttons">
        <submit label="Rechercher" class="spip_bouton" />
    </div>
</form>

<form class="form reset">
    <div class="buttons">
        <submit label="Effacer tout" class="reset spip_bouton" />
    </div>
</form>

</div>