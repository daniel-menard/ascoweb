/*
<template match="//form/autosave" name="">
    <def name="form_uniq_id" value="{autoId('form').crc32($this->request)}" />
    <input type="hidden" name="_autosave" value="$form_uniq_id" />
    Données enregistrées dans la session pour le formulaire "$form_uniq_id" :<pre>{var_export($this->formData($form_uniq_id),true)}</pre>
</template>
*/



<div class="titre" align="left">Rechercher des documents</div>
<div class="texte">
    <form class="form search" action="Search" method="get">
/*        <autosave /> */

		<table>
			<tr>
				<td>		
					<div style="font-size:14px; ">
						<textarea 
							name="_equation" 
							rows="1"
							onkeyup="if(event.keyCode==13)this.form.submit();" 
							value="{htmlspecialchars(implode(' AND ',$this->request->asArray('_equation')->ok()))}"
						/>
            
					</div>
				</td>
				<td>	
					<div class="buttons">             			   
						<submit label="Lancer la recherche" />
					</div>
				</td>
			</tr>
			<tr>
				<td>
					<div style="font-size:12px; font-weight:bold; margin-left:37%;">
					   <p><a href="/Base/SearchAdvanced">Pour une recherche avancée, cliquez ici</a></p>
					</div>
				</td>
			</tr>
		</table>
			   <br />
	   <br />
	   

	 
    
		


		
	
        /* 
            Si les options d'affichage ont été indiquées, on les récupère et on les transmet
            lors de la recherche (comme ça, quand on fait 'modifier la recherche', on
            conserve toutes les options définies par l'utilisateur
        */ 
        <hidden name="_fmt" value="{htmlspecialchars($this->request->defaults('_fmt','shortref')->ok())}" />
        <hidden name="_sort" value="{htmlspecialchars($this->request->defaults('_sort','%')->ok())}" />
        <hidden name="_max" value="{htmlspecialchars($this->request->defaults('_max',100)->ok())}" />

        	<br />
		<br />
		<br />
		<br />
		<br />
		/* Lien vers aide en ligne */
		<help href="http://www.ascodocpsy.org/article.php3?id_article=903" />
		<br />

		
		<hr />
		
        /* Historique des équations de recherche */
        <slot name="searchhistory" action="templates/searchhistory.html" />

    </form>
</div>

<script type="text/javascript">


jQuery(document).ready(
    
		
	function()
    \{
        var title="Un index d'aide à la saisie est disponible pour ce champ.";

        
		
        // Critères dont la liste des valeurs de la base est disponible
        jQuery('#MotsCles').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=descripteurs&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
		
        // Critères dont la liste des valeurs de la base est disponible
        jQuery('#MotsCles').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=descripteurs&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
        
        jQuery('#Aut').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=auteurs&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
        jQuery('#Rev').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=revues&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
        jQuery('#Edit').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=editeurs&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
        jQuery('#Col').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=collections&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );

        jQuery('#Loc').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=localisations&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
        jQuery('#ProdFich').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=producteurs&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
        
        jQuery('#DipSpe').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=diplomes&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );

        jQuery('#IsbnIssn').autocomplete
        (
            '{Routing::linkFor("Lookup")}?table=isbnissn&amp;value=%s',
            \{
                asValue: true,
                title: title
            \}
        );
    \}
);

<!--
function na_show_layer(lname)
{
if (na_show_layer.arguments.length <= 1) { // don't delete, backword compatibility
if(document.getElementById) {
document.getElementById(lname).style.visibility = 'visible';
} else if(document.layers) {
document.layers[lname].visibility = 'show'
} else if(document.all)
document.all(lname).style.visibility = 'visible'
} else {
if(document.getElementById) {
document.getElementById(lname).style.visibility = 'hidden';
} else if(document.layers) {
document.layers[lname].visibility = 'hide'
} else if(document.all)
document.all(lname).style.visibility = 'hidden'
}
}

function na_hide_layer(lname)
{
if(document.getElementById) {
document.getElementById(lname).style.visibility = 'hidden';
} else if(document.layers) {
document.layers[lname].visibility = 'hide'
} else if(document.all)
document.all(lname).style.visibility = 'hidden'
}

// --> 
</script>