<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE sect1 PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
    "http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd">
<?xml-stylesheet href="/fab/web/css/docbook/dm.css" type="text/css"?>
<sect1 id="tables">

    <sect1info>
        <releaseinfo>XXX</releaseinfo>
    </sect1info>

    <title>Répertoire tables : tables d'autorité</title>
 
    <sect2 id="tables.introduction">
    
        <title>Introduction</title>
        
        <para>
            Le répertoire <emphasis>tables</emphasis> contient des tables
            utilisés lors de l'affichage du formulaire de recherche, du formulaire
            de saisie ou des notices.
        </para>
        
        <para>
            Les tables sont des fichiers texte tabulé :
            <itemizedlist>
                <listitem>
                    <para>
                        La première ligne est la ligne de titre. Elle contient
                        les libellés des champs, séparés les uns des autres 
                        par une tabulation.
                    </para>
                </listitem>
                <listitem>
                    <para>
                        Les lignes suivantes contiennent les enregistrements,
                        dont les champs sont séparés par des tabulations.
                    </para>
                </listitem>
            </itemizedlist>
        </para>
        
        <example>
            <title>fichier texte tabulé <emphasis>type.txt</emphasis></title>
            <para>               
                <screen><![CDATA[
                    code    label
                    Article Article
                    Livre   Livre
                    Congrès Congrès
                    Rapport Rapport
                    Mémoire Mémoire
                    Thèse   Thèse
                    Texte officiel  Texte officiel
                    Périodique  Titre de périodique            
                ]]></screen>
            </para>
        </example>

    </sect2>
     
    <sect2 id="tables.liste">
    <title>Liste des tables</title>

        <sect3 id="tables.liste.annuairegip">
            <title>Fichier annuairegip.txt</title>
            
            <para>
                <emphasis role="strong">Rôle :</emphasis> permet de faire la 
                correspondance entre un numéro de centre (ascoX) et l'article 
                SPIP du site web Ascodocpsy présentant le centre.
                Il est utilisé lors de l'affichage des notices pour créer un lien
                vers la page de présentation d'un centre spécifié dans les champs
                Loc, ProdFich et EtatCol (voir modules/Base/Base.php, fonction 
                getField). 
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne 
                (ident) contient les numéros "asco" attribués aux centres.
                La deuxième colonne (numarticle) contient les numéros des articles
                SPIP correspondants.
            </para>
        </sect3>

        <sect3 id="tables.liste.date">
            <title>Fichier date.txt</title>
            <para>
                <emphasis role="strong">Rôle :</emphasis> est utilisé pour générer
                les cases à cocher du critère "Date du document" du formulaire de
                recherche.
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne
                (code) contient la valeur de la case à cocher. La deuxième colonne
                (label) contient le libellé de la case à cocher.
            </para>
        </sect3>

        <sect3 id="tables.liste.membre_statut">
            <title>Fichier membre_statut.txt</title>
            <para>
                <emphasis role="strong">Rôle :</emphasis> est utilisé dans le
                formulaire de saisie de l'accès professionnel pour 
                générer les boutons radios permettant de définir le statut de 
                la notice, lorsque celle-ci n'est pas encore validée (statut : valide).
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne
                (code) contient la valeur du bouton radio. Cette valeur sera 
                injecté dans le champ "Statut" de la notice lors de l'enregistrement
                de celle-ci. La deuxième colonne (label) contient le libellé du 
                bouton radio.
            <!--  <template match="//Statut">  -->
            </para>
        </sect3>

        <sect3 id="tables.liste.nattext">
            <title>Fichier nattext.txt</title>
            <para>
                <emphasis role="strong">Rôle :</emphasis> est utilisé :
                <itemizedlist>
                    <listitem>
                        <para>
                            Dans le formulaire de recherche, pour générer la zone
                            de selection multiple (select) du critère "Nature du 
                            texte officiel".
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Dans le formulaire de saisie des documents de type 
                            "Texte officiel" et celui présentant tous les champs
                            (disponible uniquement en accès administrateur), pour 
                            générer les boutons radios permettant de choisir la 
                            nature du texte officiel.
                        </para>
                    </listitem>
                </itemizedlist>
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne
                (code) contient la valeur du bouton radio. La deuxième colonne
                (label) contient le libellé du bouton radio.
            </para>
        </sect3>

        <sect3 id="tables.liste.public_type">
            <title>Fichier public_type.txt</title>
            <para>
                <emphasis role="strong">Rôle :</emphasis> est utilisé pour générer
                les cases à cocher du critère "Type de document" du formulaire de
                recherche de l'accès public. Les utilisateurs non connectés n'ont
                en effet pas accès aux documents de type "Périodique". 
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne
                (code) contient la valeur de la case à cocher. La deuxième colonne
                (label) contient le libellé de la case à cocher.
            </para>
        </sect3>

        <sect3 id="tables.liste.statut">
            <title>Fichier statut.txt</title>
            <para>
                <emphasis role="strong">Rôle :</emphasis> est utilisé :
                <itemizedlist>
                    <listitem>
                        <para>
                            Dans le formulaire de recherche des accès professionnel
                            et administrateur, pour générer les cases à cocher
                            du critère "Statut de la notice".
                        </para>
                    </listitem>
                    <listitem>
                        <para>
                            Dans le formulaire de saisie de l'accès administrateur 
                            pour générer les boutons radios permettant de définir 
                            le statut de la notice.
                        </para>
                    </listitem>                
                    <listitem>
                        <para>
                            Dans le formulaire de saisie de l'accès professionnel 
                            pour générer les boutons radios permettant de définir 
                            le statut de la notice, lorsque celle-ci a été 
                            validée.
                        </para>
                    </listitem>
                </itemizedlist>                
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne
                (code) contient la valeur du bouton radio. Cette valeur sera 
                injecté dans le champ "Statut" de la notice lors de l'enregistrement
                de celle-ci. La deuxième colonne (label) contient le libellé du 
                bouton radio.
            </para>
        </sect3>

        <sect3 id="tables.liste.type">
            <title>Fichier type.txt</title>
            <para>
                <emphasis role="strong">Rôle :</emphasis> est utilisé pour générer
                les cases à cocher du critère "Type de document" du formulaire de
                recherche des accès professionnel et administrateur.
                Les utilisateurs de ces deux accès peuvent faire des recherches 
                sur tous les types de document, contrairement aux utilisateurs 
                de l'accès public qui ne peuvent pas accéder aux notices de type
                "Périodique".
            </para>
            <para>
                <emphasis role="strong">Contenu :</emphasis> La première colonne
                (code) contient la valeur de la case à cocher. La deuxième colonne
                (label) contient le libellé de la case à cocher.
            </para>
        </sect3>

    </sect2>
    
</sect1>
